<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="This page explains everything related to the deployment, server requirments, how to deploy using FTP etc.">

        <meta property="og:site_name" content="DUCS Office Portal Docs"/>
        <meta property="og:title" content="Deployment | DUCS Office Portal Docs"/>
        <meta property="og:description" content="This page explains everything related to the deployment, server requirments, how to deploy using FTP etc."/>
        <meta property="og:url" content="https://gautamswati.github.io/ducs-office-automation-docs/docs/deployment"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="DUCS Office Portal Docs">
        <meta name="twitter:card" content="summary_large_image">

        
        <title>DUCS Office Portal Docs | Deployment</title>

        <link rel="home" href="https://gautamswati.github.io/ducs-office-automation-docs">
        <link rel="icon" href="/favicon.ico">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="https://gautamswati.github.io/ducs-office-automation-docs/assets/build/css/main.css?id=465ae87fc67b1f818a01">

            </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b mb-8 py-4" role="banner">
            <div class="container flex items-center max-w-8xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="https://gautamswati.github.io/ducs-office-automation-docs" title="DUCS Office Portal Docs home" class="inline-flex items-center">
                        <img class="h-8 md:h-10 mr-3" src="https://gautamswati.github.io/ducs-office-automation-docs/assets/img/university-logo.png" alt="DUCS Office Portal Docs logo" />

                        <h1 class="text-lg md:text-2xl text-blue-900 font-semibold hover:text-blue-600 my-0 pr-4">DUCS Office Portal Docs</h1>
                    </a>
                </div>

                <div class="flex flex-1 justify-end items-center text-right md:pl-10">
                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue-500 border border-blue-500 h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="w-full flex-auto">
            <section class="container max-w-8xl mx-auto px-6 md:px-8 py-4">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="nav-menu hidden lg:block">
            <ul class="my-0">
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/getting-started"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Getting Started
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/problem-statement"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Problem Statment
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/workflow"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Workflow
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/roles-and-permissions"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Roles &amp; Permissions
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/auth-and-policies"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Authentication &amp; Authorization
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/tools"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Tools Used
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/trade-offs"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Trade Offs
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/maintenance"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Maintenance
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/deployment"
            class="lvl0  active font-semibold text-blue-500 nav-menu__item hover:text-blue-500"
        >
            Deployment
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/target-audience"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Target Audience
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/future-scope"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Future Scope
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="https://gautamswati.github.io/ducs-office-automation-docs/docs/references"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            References
        </a>
    
    </li>
    </ul>
        </nav>

        <div class="DocSearch-content w-full lg:w-3/5 break-words pb-16 lg:pl-4" v-pre>
            <h2>Deployment</h2>

<p>The website is hosted at DUCC's servers. We requested a sub domain on exisitng <code>cs.du.ac.in</code> domain and hosting services from DUCC to help deployment of our application.</p>

<p>Here is the List of Services received from DUCC:</p>

<ul>
<li>A Subdomain office.cs.du.ac.in with a shared hosting server space.</li>
<li>A cPanel to manage our server (databases, ftp users, etc)</li>
<li>SFTP Access to server directory.</li>
<li>Access to phpMyAdmin to manage our server database.</li>
</ul>

<p>Thanks to <strong>Miss. Seema Sirpal</strong> who helped us getting the hosting services from DUCC.</p>

<p>To begin with deployment we need to first prepare the application locally and then deploy it to the server.</p>

<h3>1. Prepare Application Locally</h3>

<p>Before you can upload the application to server using FTP, you need to prepare our application for production on our local system. Our task here is to get the application running in production mode so that we can upload the application as it is to the FTP server.</p>

<p>To begin with, make sure you have all the prerequisites installed on your system as mentioned in the projecct's <a href="https://github.com/gautamswati/ducs-office-automation/blob/master/readme.md#installing-prerequisites">readme</a>.</p>

<blockquote>
  <p><strong>Tip:</strong> We advise you to begin with a freshly cloned application in a seperate director rather than using the same version you are using for development, to avoid wierd issues that may occur due to mismatched/overwritten files.</p>
</blockquote>

<p>Steps <strong>4-6</strong> are required <em>only</em> if there is a change in database.</p>

<ol>
<li><strong>Install Dependencies</strong>: After a fresh clone you'd need to install all the JS &amp; PHP dependencies. To install dependecies run the following one by one.
<code>npm install
composer install</code></li>
<li><strong>Build JS/CSS Assets for production</strong>: To build assets you'd simply run <code>npm run production</code>.</li>
<li><strong>Configure Environment Variables</strong>: Duplicate the example <code>.env.example</code> file to <code>.env</code> and then generate application key using <code>php artisan key:generate</code>. You won't need to change any other variables just yet.</li>
<li><strong>Cache compiled views</strong>: Cache the compiled views using <code>php artisan view:cache</code>. This will compile and cache all the views to <code>storage/framework/views</code>, you will need to upload this directory to the server so our application in production wont need to compile the views on the fly, resulting in a performance improvement.</li>
<li><p><strong>Create fresh local database</strong>: Create a fresh database (say <code>ducs_prod</code>) in your local mysql instance.</p>

<p>Then, export the existing records from the production database on the server using phpMyAdmin, to a <code>.sql</code> file, and import this <code>.sql</code> file to your local database using phpMyAdmin/adminer on your local system.</p></li>
<li><strong>Configure Database &amp; Run Migrations</strong>: Change environment variables according to the database created and Run migrations using <code>php artisan migrate</code>.</li>
<li><strong>Export Database to .sql file</strong>: Using adminer/phpMyAdmin UI you can export the whole database (with all data and structure) to a .sql file. Store .sql somewhere in your system, you would need this to export the modified database structure to the server.</li>
</ol>

<blockquote>
  <p><strong>Caution:</strong> Avoid changing the structure of existing tables, that may cause data loss, if you didn't write migrations properly to map existing data to new structure. It is advised to make sure there is no data loss at this point, and only after that proceed further.</p>
</blockquote>

<h3>2. Upload to Server Directory</h3>

<p>Once we have the application's production build ready, we can now proceed to upload the files to the server, after some cleanup.</p>

<ol>
<li><strong>Cleanup existing files</strong>: Remove everything from the server except the following files/directories:

<ul>
<li><code>.env</code> -  you'd only change this file only if required.</li>
<li><code>storage/app</code> - this folder contains uploaded files you dont want to remove those.</li>
<li><code>storage/framework/cache</code> - this folder contains the cache data some of which might be important.</li>
<li><code>vendor</code> (you'd need to remove this folder and upload again if you have updated/added new PHP dependencies)</li>
</ul></li>
<li><strong>Copy files</strong>: We would copy the application file in few steps.

<ul>
<li>First, copy all the files/directories in the root to the server directory except <code>node_modules</code>, <code>.env</code>, <code>tests</code>, and <code>storage</code>.</li>
<li>Next, You'd copy the compiled views to the server, by copying <code>storage/framework/views</code> to the server with same directory structure.</li>
</ul></li>
<li><strong>Export database</strong>: Logon to sever's phpMyAdmin and import the <code>.sql</code> file that you export in the step 1.7. You can ignore this step if you have made no changes to the database.</li>
<li><strong>Turn on/off Debug mode</strong>: You might want to switch to debug mode if the application doesn't seem to work on production and debug the problems. Set <code>APP_DEBUG=true</code> and <code>APP_ENV=local</code>. Make sure your turn off debug mode and set the <code>APP_ENV</code> back to <code>production</code>, once you are done with deployment.</li>
</ol>
        </div>
    </div>
</section>
        </main>

        <script src="/assets/build/js/main.js?id=081470c930e90325d380"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center my-0">
                <li class="md:mr-2">
                    &copy; <a href="#" title="DUCS website">DUCS</a> 2020.
                </li>

                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>
    </body>
</html>
